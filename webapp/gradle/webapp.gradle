apply plugin: "war"


description = "Apereo CAS Web Application"

sourceSets {
    main {
        resources {
            srcDirs "${project.buildDir}/generated-src/main/resources", "${project.projectDir}/../resources"
        }
    }
}

javadoc {
    enabled false
}

war {
    def currentTime = java.time.ZonedDateTime.now()

    manifest {
        attributes("Implementation-Title": project.name,
                "Implementation-Vendor": project.group,
                "Created-By": project.group,
                "Implementation-Date": currentTime,
                "Specification-Version": rootProject.currentRevision,
                "Implementation-Version": project.version)
    }
    from "${project.buildDir}/generated-src/main/resources", { into "WEB-INF/classes" }
    enabled = !rootProject.publishReleases && !rootProject.publishSnapshots
}

dependencies {
    api project(":core:cas-server-core")
    api project(":core:cas-server-core-monitor")
    api project(":core:cas-server-core-authentication")
    api project(":core:cas-server-core-services")
    api project(":core:cas-server-core-logout")
    api project(":core:cas-server-core-audit")
    api project(":core:cas-server-core-logging")
    api project(":core:cas-server-core-tickets")
    api project(":core:cas-server-core-web")
    api project(":core:cas-server-core-validation")
    api project(":core:cas-server-core-util")
    api project(":core:cas-server-core-events")
    api project(":core:cas-server-core-configuration")

    api project(":support:cas-server-support-throttle")
    api project(":support:cas-server-support-configuration")
    api project(":support:cas-server-support-geolocation")
    api project(":support:cas-server-support-actions")
    api project(":support:cas-server-support-cookie")
    api project(":support:cas-server-support-reports")
    api project(":support:cas-server-support-themes")
    api project(":support:cas-server-support-validation")
    api project(":support:cas-server-support-pm")
    
    api project(":webapp:cas-server-webapp-config")
    
    implementation libraries.pac4j
    implementation libraries.thymeleaf
    implementation libraries.groovy
    implementation libraries.cassecurityfilter
    implementation libraries.metrics
    implementation libraries.bouncycastle
}

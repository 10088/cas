apply plugin: "war"
apply plugin: "org.springframework.boot"
apply plugin: "io.spring.dependency-management"

def MAIN_CLASS = "org.apereo.cas.CasConfigurationServerWebApplication"

description = "Apereo CAS Spring Cloud Configuration Server"

javadoc {
    enabled false
}

bootRun {
    sourceResources sourceSets.main
    jvmArgs = ["-Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=n"]
}

war {
    enabled = !rootProject.publishingRelease
}

springBoot  {
    mainClassName = MAIN_CLASS
}

bootWar {
    mainClassName = MAIN_CLASS
    enabled = !rootProject.publishingRelease
}

dependencies {
    providedRuntime libraries.springboottomcat
    runtimeOnly libraries.springsecurity
    runtimeOnly libraries.springsecurityweb
    runtimeOnly libraries.springsecurityconfig
    implementation libraries.springcloudconfigserver
    implementation project(":core:cas-server-core-util-api")
}

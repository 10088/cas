<div class="panel panel-success">
  <div class="panel-heading">
    <ng-container i18n="services_form_header_sas">
      {{ messages.services_form_header_sas }}
    </ng-container>
  </div>
  <div class="panel-body">
    <div class="form-group">
      <div class="col-sm-6 checkbox">
        <label class="col-sm-12" for="ssoEnabled">
          <input type="checkbox" id="ssoEnabled" [(ngModel)]="service.accessStrategy.ssoEnabled">
          <ng-container i18n="services.form.label.sas.ssoEnabled">
            {{ messages.services_form_label_sas_ssoEnabled }}
          </ng-container>
          <i i18n-myTooltip="services.form.tooltip.sas.ssoEnabled" [myTooltip]="messages.services_form_tooltip_sas_ssoEnabled"></i>
        </label>
      </div>
      <div class="col-sm-6 checkbox">
        <label class="col-sm-12" for="sasRequireAll">
          <input type="checkbox" id="sasRequireAll"
                 [(ngModel)]="service.accessStrategy.requireAllAttributes">
          <ng-container i18n="services.form.label.sas.requireAll">
            {{ messages.services_form_label_sas_requireAll }}
          </ng-container>
          <i i18n-myTooltip="services.form.tooltip.sas.requireAll" [myTooltip]="messages.services_form_tooltip_sas_requireAll"></i>
        </label>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-12">
        <ng-container i18n="services.form.label.sas.requiredAttr">
          {{ messages.services_form_label_sas_requiredAttr }}
        </ng-container>
        <i i18n-myTooltip="services.form.tooltip.sas.requiredAttr" [myTooltip]="messages.services_form_tooltip_sas_requiredAttr"></i>
      </label>
    </div>

    <!-- sasMapTable -->
    <div class="panel panel-default">
      <table id="sasMapTable" class="table table-striped table-hover table-responsive table-condensed">
        <thead>
        <tr>
          <th class="col-md-6">
            <ng-container i18n="services.form.label.attrRelease.policies.sourceAttribute">
              {{ messages.services_form_label_attrRelease_policies_sourceAttribute }}
            </ng-container>
          </th>
          <th class="col-md-6">
            <ng-container i18n="services.form.label.attrRelease.policies.casAttribute">
              {{ messages.services_form_label_attrRelease_policies_casAttribute }}
            </ng-container>
          </th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let mappedValue of formData.availableAttributes">
          <td class="va-middle">{{ mappedValue }}</td>
          <td><input class="form-control noresize"
                     [ngModel]="service.accessStrategy.requiredAttributes[mappedValue]"
                     (ngModelChange)="service.accessStrategy.requiredAttributes[mappedValue] = $event.split(',')">
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Unauthorized Redirect URL -->
    <div class="form-group">
      <label for="unauthorizedRedirectUrl" class="col-sm-4">
        <span style="float:right">
          <ng-container i18n="services.form.label.sas.unauthorizedredirecturl">
            {{ messages.services_form_label_sas_unauthorizedredirecturl }}
          </ng-container>
          <i i18n="services.form.tooltip.sas.unauthorizedredirecturl" [myTooltip]="messages.services_form_tooltip_sas_unauthorizedredirecturl"></i>
        </span>
      </label>
      <div class="col-sm-8">
        <input type="text" class="form-control" id="unauthorizedRedirectUrl"
               [(ngModel)]="service.accessStrategy.unauthorizedRedirectUrl">
      </div>
    </div>

    <!-- Case Insensitive -->
    <div class="form-group">
      <label for="unauthorizedRedirectUrl" class="col-sm-4">
        <span style="float:right">
          <ng-container i18n="services.form.label.sas.caseinsensitive">
            {{ messages.services_form_label_sas_caseinsensitive }}
          </ng-container>
          <i i18n-myTooltip="services.form.tooltip.sas.unauthorizedredirecturl" [myTooltip]="messages.services_form_tooltip_sas_unauthorizedredirecturl"></i>
        </span>
      </label>
      <div class="col-sm-8">
        <div class="checkbox checkbox-inline">
          <input type="checkbox" id="caseInsensitive" [(ngModel)]="service.accessStrategy.caseInsensitive">
        </div>
      </div>
    </div>

    <app-rejectedattributes [service]="service"></app-rejectedattributes>

    <!-- Select Type -->
    <div class="form-group">
      <label for="selectType" class="col-sm-4">
        <span style="float:right">
          <ng-container i18n="services.form.label.sas.selecttype">
            {{ messages.services_form_label_sas_selecttype }}
          </ng-container>
          <i i18n-myTooltip="services.form.tooltip.sas.selecttype" [myTooltip]="messages.services_form_tooltip_sas_selecttype"></i>
        </span>
      </label>
      <div class="col-sm-8">
        <select class="form-control" id="selectType" [(ngModel)]="type" (change)="changeType()">
          <option
            *ngFor="let opt of selectOptions.selectType"
            [value]="opt.value">
            {{ opt.name }}
          </option>
        </select>
      </div>
    </div>

    <div class="form-group" *ngIf="type == 'REMOTE'">
      <app-remote [accessStrategy]="service.accessStrategy"></app-remote>
    </div>

    <div id="accessDateTime"
         *ngIf="type != 'DEFAULT' && type != 'REMOTE'">
      <app-time [accessStrategy]="service.accessStrategy"></app-time>
    </div>


    <div id="grouperOptions" *ngIf="type == 'GROUPER'">
      <app-grouper [accessStrategy]="service.accessStrategy" [selectOptions]="selectOptions"></app-grouper>
    </div>
  </div>
</div>


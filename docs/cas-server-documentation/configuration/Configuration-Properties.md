---
layout: default
title: CAS Properties
category: Configuration
---

{% include variables.html %}


## Custom Settings

The following settings could be used to extend CAS with arbitrary configuration keys and values:

```properties
# cas.custom.properties.[property-name]=[property-value]
```

## Cloud Configuration Bus

CAS uses the Spring Cloud Bus to manage configuration in a distributed deployment. Spring Cloud Bus links nodes of a
distributed system with a lightweight message broker.

```properties
# spring.cloud.bus.enabled=false
# spring.cloud.bus.refresh.enabled=true
# spring.cloud.bus.env.enabled=true
# spring.cloud.bus.destination=CasCloudBus
# spring.cloud.bus.ack.enabled=true
```

To learn more about this topic, [please review this guide](Configuration-Management.html).

### RabbitMQ

Broadcast CAS configuration updates to other nodes in the cluster
via [RabbitMQ](http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_rabbitmq_binder).

```properties
# spring.rabbitmq.host=
# spring.rabbitmq.port=
# spring.rabbitmq.username=
# spring.rabbitmq.password=

# Or all of the above in one line
# spring.rabbitmq.addresses=
```

### Kafka

Broadcast CAS configuration updates to other nodes in the cluster
via [Kafka](http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_apache_kafka_binder).

```properties
# spring.cloud.stream.bindings.output.content-type=application/json
# spring.cloud.stream.kafka.binder.zkNodes=...
# spring.cloud.stream.kafka.binder.brokers=...
```



## CAS Server

Identify the CAS server. `name` and `prefix` are always required settings.

A CAS host is automatically appended to the ticket ids generated by CAS.
If none is specified, one is automatically detected and used by CAS.

```properties
# cas.server.name=https://cas.example.org:8443
# cas.server.prefix=https://cas.example.org:8443/cas 
# cas.server.scope=example.org
# cas.host.name=
```

## Session replication

Control aspects of session replication for certain CAS features, such as OAuth or OpenID Connect,
allowing session and authentication profile data to be kept with the client as a cookie.

{% include {{ version }}/cookie-configuration.md configKey="cas.session-replication.cookie" %}

```properties
# cas.session-replication.auto-configure-cookie-path=true
```

## CAS Banner

On startup, CAS will display a banner along with some diagnostics info.
In order to skip this step and summarize, set the system property `-DCAS_BANNER_SKIP=true`.

### Update Check

CAS may also be conditionally configured to report, as part of the 
banner, whether a newer CAS release is available for an upgrade.
This check is off by default and may be enabled with a system property of `-DCAS_UPDATE_CHECK_ENABLED=true`.

## Actuator Management Endpoints

The following properties describe access controls and settings for the `/actuator`
endpoint of CAS which provides administrative functionality and oversight into the CAS software.

To learn more about this topic, [please review this guide](../monitoring/Monitoring-Statistics.html).

```properties
# management.endpoints.enabled-by-default=true
# management.endpoints.web.base-path=/actuator

# management.endpoints.web.exposure.include=info,health,status,configurationMetadata
# management.endpoints.web.exposure.exclude=

# management.endpoints.jmx.exposure.exclude=*
# management.endpoints.jmx.exposure.include=
```

### Basic Authentication Security

Credentials for basic authentication may be defined via the following settings:

```properties
# spring.security.user.name=casuser
# spring.security.user.password=
# spring.security.user.roles=
```

### JAAS Authentication Security

JAAS authentication for endpoint security may be configured via the following settings:

```properties
# cas.monitor.endpoints.jaas.refresh-configuration-on-startup=true
# cas.monitor.endpoints.jaas.login-config=file:/etc/cas/config/jaas.conf
# cas.monitor.endpoints.jaas.login-context-name=CAS
```

### LDAP Authentication Security

{% include {{ version }}/ldap-configuration.md configKey="cas.monitor.endpoints.ldap" %}

LDAP authentication for endpoint security may be additionally configured via the following settings:

```properties
# cas.monitor.endpoints.ldap.ldap-authz.role-attribute=uugid
# cas.monitor.endpoints.ldap.ldap-authz.role-prefix=ROLE_
# cas.monitor.endpoints.ldap.ldap-authz.allow-multiple-results=false
# cas.monitor.endpoints.ldap.ldap-authz.group-attribute=
# cas.monitor.endpoints.ldap.ldap-authz.group-prefix=
# cas.monitor.endpoints.ldap.ldap-authz.group-filter=
# cas.monitor.endpoints.ldap.ldap-authz.group-base-dn=
# cas.monitor.endpoints.ldap.ldap-authz.base-dn=
# cas.monitor.endpoints.ldap.ldap-authz.search-filter=
```

### JDBC Authentication Security

{% include {{ version }}/rdbms-configuration.md configKey="cas.monitor.endpoints.jdbc" %}

JDBC authentication for endpoint security may be additionally configured via the following settings:

```properties
# cas.monitor.endpoints.jdbc.role-prefix=
# cas.monitor.endpoints.jdbc.query=
```

{% include {{ version }}/password-encoding.md configKey="cas.monitor.endpoints.jdbc" %}


### Enabling Endpoints

To determine whether an endpoint is available, the calculation order for all endpoints is as follows:

1. The `enabled` setting of the individual endpoint (i.e. `info`) is consulted in CAS settings, as demonstrated below:

```properties
# management.endpoint.<endpoint-name>.enabled=true
```        

2. If undefined, the global endpoint security is consulted from CAS settings.
3. If undefined, the default built-in setting for the endpoint in CAS is consulted, which is typically `false` by default.

A number of available endpoint ids [should be listed here](../monitoring/Monitoring-Statistics.html).

Endpoints may also be mapped to custom arbitrary endpoints. For example, to remap the `health` endpoint to `healthcheck`, 
specify the following settings:

```properties
# management.endpoints.web.path-mapping.health=healthcheck
```

### Health Endpoint

The `health` endpoint may also be configured to show details using `management.endpoint.health.show-details` via the following conditions:

| URL                  | Description
|----------------------|-------------------------------------------------------
| `never`              | Never display details of health monitors.
| `always`             | Always display details of health monitors.
| `when-authorized`   | Details are only shown to authorized users. Authorized roles can be configured using `management.endpoint.health.roles`.

```properties
# management.endpoint.health.show-details=never
```

The results and details of the `health` endpoints are produced by a number of health indicator components that may monitor different systems, such as LDAP connection
pools, database connections, etc. Such health indicators are turned off by default and may individually be controlled and turned on via the following settings:

```properties
# management.health.<name>.enabled=true
# management.health.defaults.enabled=false 
```

The following health indicator names are available, given the presence of the appropriate CAS feature:

| Health Indicator          | Description
|----------------------|------------------------------------------------------------------------------------------
| `memoryHealthIndicator`   | Reports back on the health status of CAS JVM memory usage, etc.
| `systemHealthIndicator`   | Reports back on the health of the system of the CAS server.(Load, Uptime, Heap, CPU etc.)
| `sessionHealthIndicator`   | Reports back on the health status of CAS tickets and SSO session usage.
| `duoSecurityHealthIndicator`   | Reports back on the health status of Duo Security APIs.
| `ehcacheHealthIndicator`   | Reports back on the health status of Ehcache caches.
| `hazelcastHealthIndicator`   | Reports back on the health status of Hazelcast caches.
| `dataSourceHealthIndicator`   | Reports back on the health status of JDBC connections.
| `pooledLdapConnectionFactoryHealthIndicator`   | Reports back on the health status of LDAP connection pools.
| `memcachedHealthIndicator`   | Reports back on the health status of Memcached connections.
| `mongoHealthIndicator`   | Reports back on the health status of MongoDb connections.
| `samlRegisteredServiceMetadataHealthIndicator`   | Reports back on the health status of SAML2 service provider metadata sources.

### Endpoint Security

Global endpoint security configuration activated by CAS may be controlled under the configuration key `cas.monitor.endpoints.endpoint.<endpoint-name>`.
There is a special endpoint named `defaults`  which serves as a shortcut that controls the security of all endpoints, if left undefined in CAS settings. Accessing an endpoint
over the web can be allowed via a special login form whose access and presence can be controlled via:

```properties
# cas.monitor.endpoints.form-login-enabled=false
``` 

Note that any individual endpoint must be first enabled before any security can be applied. The security of all endpoints is controlled using the following settings:

```properties
# ${configuration-key}.required-roles[0]=
# ${configuration-key}.required-authorities[0]=
# ${configuration-key}.required-ip-addresses[0]=
# ${configuration-key}.access[0]=PERMIT|ANONYMOUS|DENY|AUTHENTICATED|ROLE|AUTHORITY|IP_ADDRESS
```

The following access levels are allowed for each individual endpoint:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `PERMIT`                | Allow open access to the endpoint.
| `ANONYMOUS`             | Allow anonymous access to the endpoint. 
| `DENY`                  | Default. Block access to the endpoint.
| `AUTHENTICATED`         | Require authenticated access to the endpoint.
| `ROLE`                  | Require authenticated access to the endpoint along with a role requirement.
| `AUTHORITY`             | Require authenticated access to the endpoint along with an authority requirement.
| `IP_ADDRESS`            | Require authenticated access to the endpoint using a collection of IP addresses.
    


## Web Application Session

Control the CAS web application session behavior
as it's treated by the underlying servlet container engine.

```properties
# server.servlet.session.timeout=PT30S
# server.servlet.session.cookie.http-only=true
# server.servlet.session.tracking-modes=COOKIE
```

## Views

Control how CAS should treat views and other UI elements.

To learn more about this topic, [please review this guide](../ux/User-Interface-Customization-Views.html).

```properties
# spring.thymeleaf.encoding=UTF-8

# Controls  whether views should be cached by CAS.
# When turned on, ad-hoc chances to views are not automatically
# picked up by CAS until a restart. Small incremental performance
# improvements are to be expected.
# spring.thymeleaf.cache=true

# Instruct CAS to locate views at the below location.
# This location can be externalized to a directory outside
# the cas web application.
# spring.thymeleaf.prefix=classpath:/templates/

# Defines a default URL to which CAS may redirect if there is no service provided in the authentication request.
# cas.view.default-redirect-url=https://www.github.com

# CAS views may be located at the following paths outside
# the web application context, in addition to prefix specified
# above which is handled via Thymeleaf.
# cas.view.template-prefixes[0]=file:///etc/cas/templates
```

## Custom Login Fields

```properties
# cas.view.custom-login-form-fields.[field-name].message-bundle-key=
# cas.view.custom-login-form-fields.[field-name].required=true
# cas.view.custom-login-form-fields.[field-name].converter=
```

### CAS v1

```properties
# cas.view.cas1.attribute-renderer-type=DEFAULT|VALUES_PER_LINE
```

### CAS v2

```properties
# cas.view.cas2.v3-forward-compatible=false
# cas.view.cas2.success=protocol/2.0/casServiceValidationSuccess
# cas.view.cas2.failure=protocol/2.0/casServiceValidationFailure
# cas.view.cas2.proxy.success=protocol/2.0/casProxySuccessView
# cas.view.cas2.proxy.failure=protocol/2.0/casProxyFailureView
```

### CAS v3

```properties
# cas.view.cas3.success=protocol/3.0/casServiceValidationSuccess
# cas.view.cas3.failure=protocol/3.0/casServiceValidationFailure
# cas.view.cas3.attribute-renderer-type=DEFAULT|INLINE
```

### Restful Views

{% include {{ version }}/rest-integration.md configKey="cas.view.rest" %}





## Authentication Attributes

Set of authentication attributes that are retrieved by the principal resolution process,
typically via some component of [Person Directory](../integration/Attribute-Resolution.html)
from a number of attribute sources unless noted otherwise by the specific authentication scheme.

If multiple attribute repository sources are defined, they are added into a list
and their results are cached and merged.

```properties
# cas.authn.attribute-repository.expiration-time=30
# cas.authn.attribute-repository.expiration-time-unit=MINUTES
# cas.authn.attribute-repository.maximum-cache-size=10000
# cas.authn.attribute-repository.merger=REPLACE|ADD|MULTIVALUED|NONE
# cas.authn.attribute-repository.aggregation=MERGE|CASCADE
```

<div class="alert alert-info"><strong>Remember This</strong><p>Note that in certain cases,
CAS authentication is able to retrieve and resolve attributes from the authentication source in the same authentication request, which would
eliminate the need for configuring a separate attribute repository specially if both the authentication and the attribute source are the same.
Using separate repositories should be required when sources are different, or when there is a need to tackle more advanced attribute
resolution use cases such as cascading, merging, etc.
<a href="../installation/Configuring-Principal-Resolution.html">See this guide</a> for more info.</p></div>

Attributes for all sources are defined in their own individual block.
CAS does not care about the source owner of attributes. It finds them where they can be found and otherwise, it moves on.
This means that certain number of attributes can be resolved via one source and the remaining attributes
may be resolved via another. If there are commonalities across sources, the merger shall decide the final result and behavior.

The story in plain english is:

- I have a bunch of attributes that I wish to resolve for the authenticated principal.
- I have a bunch of sources from which said attributes are retrieved.
- Figure it out.

Note that attribute repository sources, if/when defined, execute in a specific order.
This is important to take into account when attribute merging may take place.
By default, the execution order (when defined) is the following but can be adjusted per source:

1. LDAP
2. JDBC
3. JSON
4. Groovy
5. [Internet2 Grouper](http://www.internet2.edu/products-services/trust-identity/grouper/)
6. REST
7. Script
8. Stubbed/Static

Note that if no *explicit* attribute mappings are defined, all permitted attributes on the record
may be retrieved by CAS from the attribute repository source and made available to the principal. On the other hand,
if explicit attribute mappings are defined, then *only mapped attributes* are retrieved.

### Multimapped Attribute

Attributes may be allowed to be virtually renamed and remapped. The following definition, for instance, attempts to 
grab the attribute `uid` from the attribute source and rename it to `userId`:

```properties
# cas.authn.attribute-repository.[type-placeholder].attributes.uid=userId
```

### Merging Strategies

The following merging strategies can be used to resolve conflicts when the same attribute are found from multiple sources:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `REPLACE`               | Overwrites existing attribute values, if any.
| `ADD`                   | Retains existing attribute values if any, and ignores values from subsequent sources in the resolution chain.
| `MULTIVALUED`           | Combines all values into a single attribute, essentially creating a multi-valued attribute.
| `NONE`                  | Do not merge attributes, only use attributes retrieved during authentication.

### Aggregation Strategies

The following aggregation strategies can be used to resolve and merge attributes
when multiple attribute repository sources are defined to fetch data:
  
| Type            | Description
|-----------------|----------------------------------------------------------------------------------------------------
| `MERGE`         | Default. Query multiple repositories in order and merge the results into a single result set.
| `CASCADE`       | Same as above; results from each query are passed down to the next attribute repository source.

### Stub

Static attributes that need to be mapped to a hardcoded value belong here.

```properties
# cas.authn.attribute-repository.stub.id=

# cas.authn.attribute-repository.stub.attributes.uid=uid
# cas.authn.attribute-repository.stub.attributes.displayName=displayName
# cas.authn.attribute-repository.stub.attributes.cn=commonName
# cas.authn.attribute-repository.stub.attributes.affiliation=groupMembership
```

### LDAP

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.attribute-repository.ldap[0]" %}

```properties
# cas.authn.attribute-repository.ldap[0].id=
# cas.authn.attribute-repository.ldap[0].order=0

# cas.authn.attribute-repository.ldap[0].attributes.uid=uid
# cas.authn.attribute-repository.ldap[0].attributes.display-name=displayName
# cas.authn.attribute-repository.ldap[0].attributes.cn=commonName
# cas.authn.attribute-repository.ldap[0].attributes.affiliation=groupMembership
```

To fetch and resolve attributes that carry tags/options, consider tagging the mapped attribute as such:

```properties
# cas.authn.attribute-repository.ldap[0].attributes.affiliation=affiliation;
```
                                  
### Groovy

If you wish to directly and separately retrieve attributes from a Groovy script,
the following settings are then relevant:

```properties
# cas.authn.attribute-repository.groovy[0].location=file:/etc/cas/attributes.groovy
# cas.authn.attribute-repository.groovy[0].case-insensitive=false
# cas.authn.attribute-repository.groovy[0].order=0
# cas.authn.attribute-repository.groovy[0].id=
```

The Groovy script may be designed as:

```groovy
import java.util.*

def Map<String, List<Object>> run(final Object... args) {
    def username = args[0]
    def attributes = args[1]
    def logger = args[2]
    def properties = args[3]
    def appContext = args[4]

    logger.debug("[{}]: The received uid is [{}]", this.class.simpleName, uid)
    return[username:[uid], likes:["cheese", "food"], id:[1234,2,3,4,5], another:"attribute"]
}
```

### JSON

If you wish to directly and separately retrieve attributes from a static JSON source,
the following settings are then relevant:

```properties
# cas.authn.attribute-repository.json[0].location=file://etc/cas/attribute-repository.json
# cas.authn.attribute-repository.json[0].order=0
# cas.authn.attribute-repository.json[0].id=
```

The format of the file may be:

```json
{
    "user1": {
        "firstName":["Json1"],
        "lastName":["One"]
    },
    "user2": {
        "firstName":["Json2"],
        "eduPersonAffiliation":["employee", "student"]
    }
}
```

### REST

{% include {{ version }}/rest-integration.md configKey="cas.authn.attribute-repository.rest[0]" %}

```properties
# cas.authn.attribute-repository.rest[0].order=0
# cas.authn.attribute-repository.rest[0].id=
# cas.authn.attribute-repository.rest[0].case-insensitive=false
```

The authenticating user id is passed in form of a request parameter under `username`. The response is expected
to be a JSON map as such:

```json
{
  "name" : "JohnSmith",
  "age" : 29,
  "messages": ["msg 1", "msg 2", "msg 3"]
}
```

### Python/Javascript/Groovy

<div class="alert alert-warning"><strong>Usage</strong>
<p><strong>This feature is deprecated and is scheduled to be removed in the future.</strong></p>
</div>

Similar to the Groovy option but more versatile, this option takes advantage of Java's native 
scripting API to invoke Groovy, Python or Javascript scripting engines to compile a pre-defined script to resolve attributes. 
The following settings are relevant:

```properties
# cas.authn.attribute-repository.script[0].location=file:/etc/cas/script.groovy
# cas.authn.attribute-repository.script[0].order=0
# cas.authn.attribute-repository.script[0].id=
# cas.authn.attribute-repository.script[0].case-insensitive=false
# cas.authn.attribute-repository.script[0].engine-name=js|groovy|python
```

While Javascript and Groovy should be natively supported by CAS, Python scripts may need
to massage the CAS configuration to include the [Python modules](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22jython-standalone%22).

The Groovy script may be defined as:

```groovy
import java.util.*

Map<String, List<Object>> run(final Object... args) {
    def uid = args[0]
    def logger = args[1]

    logger.debug("Groovy things are happening just fine with UID: {}",uid)
    return[username:[uid], likes:["cheese", "food"], id:[1234,2,3,4,5], another:"attribute"]
}
```

The Javascript script may be defined as:

```javascript
function run(uid, logger) {
    print("Things are happening just fine")
    logger.warn("Javascript called with UID: {}",uid);

    // If you want to call back into Java, this is one way to do so
    var javaObj = new JavaImporter(org.yourorgname.yourpackagename);
    with (javaObj) {
        var objFromJava = JavaClassInPackage.someStaticMethod(uid);
    }

    var map = {};
    map["attr_from_java"] = objFromJava.getSomething();
    map["username"] = uid;
    map["likes"] = "cheese";
    map["id"] = [1234,2,3,4,5];
    map["another"] = "attribute";

    return map;
}
```

### JDBC

Retrieve attributes from a JDBC source. 

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.attribute-repository.jdbc[0]" %}

```properties
# cas.authn.attribute-repository.jdbc[0].attributes.uid=uid
# cas.authn.attribute-repository.jdbc[0].attributes.display-name=displayName
# cas.authn.attribute-repository.jdbc[0].attributes.cn=commonName
# cas.authn.attribute-repository.jdbc[0].attributes.affiliation=groupMembership

# cas.authn.attribute-repository.jdbc[0].single-row=true
# cas.authn.attribute-repository.jdbc[0].order=0
# cas.authn.attribute-repository.jdbc[0].id=
# cas.authn.attribute-repository.jdbc[0].require-all-attributes=true
# cas.authn.attribute-repository.jdbc[0].case-canonicalization=NONE|LOWER|UPPER
# cas.authn.attribute-repository.jdbc[0].query-type=OR|AND
# cas.authn.attribute-repository.jdbc[0].case-insensitive-query-attributes=username

# Used only when there is a mapping of many rows to one user
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name1=columnAttrValue1
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name2=columnAttrValue2
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name3=columnAttrValue3

# cas.authn.attribute-repository.jdbc[0].sql=SELECT * FROM table WHERE {0}
# cas.authn.attribute-repository.jdbc[0].username=uid
```

### Grouper

This option reads all the groups from [a Grouper instance](https://incommon.org/software/grouper/) for the given CAS principal and adopts them as CAS attributes under a `grouperGroups` multi-valued attribute.
To learn more about this topic, [please review this guide](../integration/Attribute-Resolution.html).

```properties
# cas.authn.attribute-repository.grouper[0].enabled=true
# cas.authn.attribute-repository.grouper[0].id=
# cas.authn.attribute-repository.grouper[0].order=0
```

You will also need to ensure `grouper.client.properties` is available on the classpath (i.e. `src/main/resources`)
with the following configured properties:

```properties
# grouperClient.webService.url = http://192.168.99.100:32768/grouper-ws/servicesRest
# grouperClient.webService.login = banderson
# grouperClient.webService.password = password
```

### Couchbase

This option will fetch attributes from a Couchbase database for a given CAS principal. To 
learn more about this topic, [please review this guide](../installation/Couchbase-Authentication.html). 

{% include {{ version }}/couchbase-configuration.md configKey="cas.authn.attribute-repository.couchbase" %}

```properties
# cas.authn.attribute-repository.couchbase.usernameAttribute=username
# cas.authn.attribute-repository.couchbase.order=0
# cas.authn.attribute-repository.couchbase.id=
```

### Redis

This option will fetch attributes from a Redis database for a given CAS principal. 

To learn more about this topic, [please review this guide](../installation/Redis-Authentication.html).

{% include {{ version }}/redis-configuration.md configKey="cas.authn.attribute-repository" %}

```properties
# cas.authn.attribute-repository.redis.order=0
# cas.authn.attribute-repository.redis.id=
```

### Microsoft Azure Active Directory

This option will fetch attributes from Microsoft Azure Active Directory using the Microsoft Graph API.

The following settings are available:

```properties
# cas.authn.attribute-repository.azure-active-directory[0].client-id=
# cas.authn.attribute-repository.azure-active-directory[0].client-secret=
# cas.authn.attribute-repository.azure-active-directory[0].client-secret=
# cas.authn.attribute-repository.azure-active-directory[0].tenant=

# cas.authn.attribute-repository.azure-active-directory[0].id=
# cas.authn.attribute-repository.azure-active-directory[0].order=0
# cas.authn.attribute-repository.azure-active-directory[0].case-insensitive=false
# cas.authn.attribute-repository.azure-active-directory[0].resource=
# cas.authn.attribute-repository.azure-active-directory[0].scope=
# cas.authn.attribute-repository.azure-active-directory[0].grant-type=
# cas.authn.attribute-repository.azure-active-directory[0].api-base-url=
# cas.authn.attribute-repository.azure-active-directory[0].attributes=
# cas.authn.attribute-repository.azure-active-directory[0].domain=
# cas.authn.attribute-repository.azure-active-directory[0].logging-level=
```

### Shibboleth Integrations

To learn more about this topic, [please review this guide](../integration/Shibboleth.html).

```properties
# cas.authn.shib-idp.server-url=https://idp.example.org
```

### Default Bundle

If you wish to release a default bundle of attributes to all applications,
and you would rather not duplicate the same attribute per every service definition,
then the following settings are relevant:

```properties
# cas.authn.attribute-repository.default-attributes-to-release=cn,givenName,uid,affiliation
```

To learn more about this topic, [please review this guide](../integration/Attribute-Release.html).

### Protocol Attributes

Defines whether CAS should include and release protocol attributes defined in the specification in addition to the
principal attributes. By default all authentication attributes are released when protocol attributes are enabled for
release. If you wish to restrict which authentication attributes get released, you can use the below settings to control authentication attributes more globally.

Protocol/authentication attributes may also be released conditionally on a per-service 
basis. To learn more about this topic, [please review this guide](../integration/Attribute-Release.html).

```properties
# cas.authn.authentication-attribute-release.only-release=authenticationDate,isFromNewLogin
# cas.authn.authentication-attribute-release.never-release=
# cas.authn.authentication-attribute-release.enabled=true
```



## Attribute Definitions

An attribute definition store allows one to describe metadata about necessary attributes 
with special decorations to be considered during attribute resolution and release.

```properties
# cas.person-directory.attribute-definition-store.json.location=file:/etc/cas/config/attribute-defns.json
```
 
## Authentication Engine

Control inner-workings of the CAS authentication engine, before and after the execution.

```properties
cas.authn.core.groovy-authentication-resolution.location=file:/etc/cas/config/GroovyAuthentication.groovy
cas.authn.core.groovy-authentication-resolution.order=0

cas.authn.core.service-authentication-resolution.order=0
```           

### Authentication Pre-Processing

#### Groovy

```properties
# cas.authn.core.engine.groovy-pre-processor.location=file:/etc/cas/config/GroovyPreProcessor.groovy
```

The script itself may be designed as:

```groovy
def run(Object[] args) {
    def transaction = args[0]
    def logger = args[1]
    true
}

def supports(Object[] args) {
    def credential = args[0]
    def logger = args[1]
    true
}
```

### Authentication Post-Processing

#### Groovy

```properties
# cas.authn.core.engine.groovy-post-processor.location=file:/etc/cas/config/GroovyPostProcessor.groovy
```

The script itself may be designed as:

```groovy
def run(Object[] args) {
    def builder = args[0]
    def transaction = args[1]
    def logger = args[2]
    true
}

def supports(Object[] args) {
    def credential = args[0]
    def logger = args[1]
    true
}
```



## Adaptive Authentication

Control how CAS authentication should adapt itself to incoming client requests.
To learn more about this topic, [please review this guide](../mfa/Configuring-Adaptive-Authentication.html).

```properties
# cas.authn.adaptive.reject-countries=United.+
# cas.authn.adaptive.reject-browsers=Gecko.+
# cas.authn.adaptive.reject-ip-addresses=127.+

# cas.authn.adaptive.require-multifactor.mfa-duo=127.+|United.+|Gecko.+
```

Adaptive authentication can also react to specific times in order to trigger multifactor authentication.

```properties
# cas.authn.adaptive.require-timed-multifactor[0].provider-id=mfa-duo
# cas.authn.adaptive.require-timed-multifactor[0].on-or-after-hour=20
# cas.authn.adaptive.require-timed-multifactor[0].on-or-before-hour=7
# cas.authn.adaptive.require-timed-multifactor[0].on-days=Saturday,Sunday
```

### IP Address Intelligence

Examine the client IP address via the following strategies.

#### REST Adaptive Authentication

{% include {{ version }}/rest-integration.md configKey="cas.authn.adaptive.ip-intel.rest" %}

#### Groovy Adaptive Authentication

```properties
# cas.authn.adaptive.ip-intel.groovy.location=file:/etc/cas/config/GroovyIPAddressIntelligenceService.groovy
```

#### BlackDot Adaptive Authentication

```properties
# cas.authn.adaptive.ip-intel.black-dot.url=http://check.getipintel.net/check.php?ip=%s
# cas.authn.adaptive.ip-intel.black-dot.email-address=
# cas.authn.adaptive.ip-intel.black-dot.mode=DYNA_LIST
```

## Surrogate Authentication

Authenticate on behalf of another user.
To learn more about this topic, [please review this guide](../installation/Surrogate-Authentication.html).

```properties
# cas.authn.surrogate.separator=+
# cas.authn.surrogate.tgt.time-to-kill-in-seconds=30
```

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.surrogate.principal" %}

### Static Surrogate Accounts

```properties
# cas.authn.surrogate.simple.surrogates.casuser=jsmith,jsmith2
# cas.authn.surrogate.simple.surrogates.casuser2=jsmith4,jsmith2
```

### JSON Surrogate Accounts

```properties
# cas.authn.surrogate.json.location=file:/etc/cas/config/surrogates.json
```

### LDAP Surrogate Accounts

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.surrogate.ldap" %}

```properties
# cas.authn.surrogate.ldap.surrogate-search-filter=(&(principal={user})(memberOf=cn=edu:example:cas:something:{user},dc=example,dc=edu))
# cas.authn.surrogate.ldap.member-attribute-name=memberOf
# cas.authn.surrogate.ldap.member-attribute-value-regex=cn=edu:example:cas:something:([^,]+),.+
```

### CouchDb Surrogate Accounts

{% include {{ version }}/couchdb-integration.md configKey="cas.authn.surrogate" %}. 

Surrogates may be stored either as part of the principals profile or as a 
series of principal/surrogate pair. The default is a key/value pair.

```properties
# cas.authn.surrogate.ldap.surrogate-search-filter=(&(principal={user})(memberOf=cn=edu:example:cas:something:{user},dc=example,dc=edu))
# cas.authn.surrogate.ldap.member-attribute-name=memberOf
# cas.authn.surrogate.ldap.member-attribute-value-regex=cn=edu:example:cas:something:([^,]+),.+
```

### JDBC Surrogate Accounts

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.surrogate.jdbc" %}

```properties
# cas.authn.surrogate.jdbc.surrogate-search-query=SELECT COUNT(*) FROM surrogate WHERE username=?
# cas.authn.surrogate.jdbc.surrogate-account-query=SELECT surrogate_user AS surrogateAccount FROM surrogate WHERE username=?
```

### REST Surrogate Accounts

{% include {{ version }}/rest-integration.md configKey="cas.authn.surrogate.rest" %}

### Notifications

{% include {{ version }}/email-notifications.md configKey="cas.authn.surrogate" %}

{% include {{ version }}/sms-notifications.md configKey="cas.authn.surrogate" %}

## QR Authentication

Attempt to login via a mobile device via a QR code. To learn more about this 
topic, [please review this guide](../installation/QRCode-Authentication.html).

```properties   
# Configure allowed Origin header values for browser clients.
# cas.authn.qr.allowed-origins=*
```

### JSON Device Repository

Attempt to login via a mobile device via a QR code. To learn more about this 
topic, [please review this guide](../installation/QRCode-Authentication.html).

```properties
# cas.authn.qr.json.location=file:/etc/cas/config/qrdevices.json
```

## Risk-based Authentication

Evaluate suspicious authentication requests and take action. To learn 
more about this topic, [please review this guide](../installation/Configuring-RiskBased-Authentication.html).

```properties
# cas.authn.adaptive.risk.threshold=0.6
# cas.authn.adaptive.risk.days-in-recent-history=30

# cas.authn.adaptive.risk.ip.enabled=false

# cas.authn.adaptive.risk.agent.enabled=false

# cas.authn.adaptive.risk.geo-location.enabled=false

# cas.authn.adaptive.risk.date-time.enabled=false
# cas.authn.adaptive.risk.date-time.window-in-hours=2

# cas.authn.adaptive.risk.response.block-attempt=false

# cas.authn.adaptive.risk.response.mfa-provider=
# cas.authn.adaptive.risk.response.risky-authentication-attribute=triggeredRiskBasedAuthentication
```

{% include {{ version }}/email-notifications.md configKey="cas.authn.adaptive.risk.response" %}

{% include {{ version }}/sms-notifications.md configKey="cas.authn.adaptive.risk.response" %}


## Google Cloud Firebase Messaging

To learn more about this topic, [please review this guide](../notifications/Notifications-Configuration.html).

```properties
# cas.google-firebase-messaging.service-account-key.location=/path/to/account-key.json",
# cas.google-firebase-messaging.database-url=https://cassso-123456.firebaseio.com",
# cas.google-firebase-messaging.registration-token-attribute-name=registrationToken
# cas.google-firebase-messaging.scopes=https://www.googleapis.com/auth/firebase.messaging
```

## GeoTracking

To learn more about this topic, [please review this guide](../installation/GeoTracking-Authentication-Requests.html).

### GoogleMaps GeoTracking

Used to geo-profile authentication events.

```properties
# cas.google-maps.api-key=
# cas.google-maps.client-id=
# cas.google-maps.client-secret=
# cas.google-maps.connect-timeout=3000
# cas.google-maps.google-apps-engine=false
```

### Maxmind GeoTracking

Used to geo-profile authentication events.

```properties
# cas.maxmind.city-database=file:/etc/cas/maxmind/GeoLite2-City.mmdb
# cas.maxmind.country-database=file:/etc/cas/maxmind/GeoLite2-Country.mmdb
```



## Digest Authentication

To learn more about this topic, [please review this guide](../installation/Digest-Authentication.html).

```properties
# cas.authn.digest.users.casuser=3530292c24102bac7ced2022e5f1036a
# cas.authn.digest.users.anotheruser=7530292c24102bac7ced2022e5f1036b
# cas.authn.digest.realm=CAS
# cas.authn.digest.name=
# cas.authn.digest.order=
# cas.authn.digest.authentication-method=auth
```


## File Authentication

To learn more about this topic, [please review this guide](../installation/Permissive-Authentication.html).

{% include {{ version }}/principal-transformation.md configKey="cas.authn.file" %}

{% include {{ version }}/password-encoding.md configKey="cas.authn.file" %}

```properties
# cas.authn.file.separator=::
# cas.authn.file.filename=file:///path/to/users/file
# cas.authn.file.name=
```

## Groovy Authentication

To learn more about this topic, [please review this guide](../installation/Groovy-Authentication.html).

```properties
# cas.authn.groovy.order=0
# cas.authn.groovy.name=
```


## Reject Users Authentication

To learn more about this topic, [please review this guide](../installation/Reject-Authentication.html).

{% include {{ version }}/principal-transformation.md configKey="cas.authn.reject" %}

{% include {{ version }}/password-encoding.md configKey="cas.authn.reject" %}

```properties
# cas.authn.reject.users=user1,user2
# cas.authn.reject.name=
```



### LDAP Password Policy

{% include {{ version }}/password-policy.md configKey="cas.authn.ldap[0].password-policy" %}

### LDAP Password Encoding & Principal Transformation

{% include {{ version }}/principal-transformation.md configKey="cas.authn.ldap[0]" %}

{% include {{ version }}/password-encoding.md configKey="cas.authn.ldap[0]" %}

## REST Authentication

This allows the CAS server to reach to a remote REST endpoint via a `POST`.
To learn more about this topic, [please review this guide](../installation/Rest-Authentication.html). 

{% include {{ version }}/password-encoding.md configKey="cas.authn.rest" %}

```properties
# cas.authn.rest.uri=https://...
# cas.authn.rest.name=
# cas.authn.rest.charset=US-ASCII
```

## Google Apps Authentication

Authenticate via CAS into Google Apps services and applications.
To learn more about this topic, [please review this guide](../integration/Google-Apps-Integration.html).

```properties
# cas.google-apps.public-key-location=file:/etc/cas/public.key
# cas.google-apps.key-algorithm=RSA
# cas.google-apps.private-key-location=file:/etc/cas/private.key
```

## OpenID Authentication

Allow CAS to become an OpenID authentication provider. To learn more about this topic, [please review this guide](../protocol/OpenID-Protocol.html).

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.openid.principal" %}

```properties
# cas.authn.openid.enforce-rp-id=false
# cas.authn.openid.name=
# cas.authn.openid.order=
```

## SPNEGO Authentication

To learn more about this topic, [please review this guide](../installation/SPNEGO-Authentication.html).

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.spnego.principal" %}

```properties
# cas.authn.spnego.mixed-mode-authentication=false
# cas.authn.spnego.supported-browsers=MSIE,Trident,Firefox,AppleWebKit
# cas.authn.spnego.send401-on-authentication-failure=true
# cas.authn.spnego.ntlm-allowed=true
# cas.authn.spnego.principal-with-domain-name=false
# cas.authn.spnego.name=
# cas.authn.spnego.ntlm=false
```

{% include {{ version }}/webflow-configuration.md configKey="cas.authn.spnego.webflow" %}

### System Settings

```properties
# cas.authn.spnego.system.kerberos-conf=
# cas.authn.spnego.system.login-conf=
# cas.authn.spnego.system.kerberos-realm=EXAMPLE.COM
# cas.authn.spnego.system.kerberos-debug=true
# cas.authn.spnego.system.use-subject-creds-only=false
# cas.authn.spnego.system.kerberos-kdc=172.10.1.10
```

### Spnego Authentication Settings

```properties
# cas.authn.spnego.properties[0].cache-policy=600
# cas.authn.spnego.properties[0].jcifs-domain-controller=
# cas.authn.spnego.properties[0].jcifs-domain=
# cas.authn.spnego.properties[0].jcifs-password=
# cas.authn.spnego.properties[0].jcifs-username=
# cas.authn.spnego.properties[0].jcifs-service-password=
# cas.authn.spnego.properties[0].timeout=300000
# cas.authn.spnego.properties[0].jcifs-service-principal=HTTP/cas.example.com@EXAMPLE.COM
# cas.authn.spnego.properties[0].jcifs-netbios-wins=
```

### SPNEGO Client Selection Strategy

```properties
# cas.authn.spnego.host-name-client-action-strategy=hostnameSpnegoClientAction
```

### SPNEGO Client Selection Hostname

```properties
# cas.authn.spnego.alternative-remote-host-attribute=alternateRemoteHeader
# cas.authn.spnego.ips-to-check-pattern=127.+
# cas.authn.spnego.dns-timeout=2000
# cas.authn.spnego.host-name-pattern-string=.+
```

### SPNEGO LDAP Integration

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.spnego.ldap" %}

```properties
# cas.authn.spnego.spnego-attribute-name=distinguishedName
```

### NTLM Authentication

```properties
# cas.authn.ntlm.include-pattern=
# cas.authn.ntlm.load-balance=true
# cas.authn.ntlm.domain-controller=
# cas.authn.ntlm.name=
# cas.authn.ntlm.order=
# cas.authn.ntlm.enabled=false
```



## GUA Authentication

To learn more about this topic, [please review this guide](../installation/GUA-Authentication.html).

### LDAP Repository

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.gua.ldap" %}

```properties
# cas.authn.gua.ldap.image-attribute=userImageIdentifier
```

### Static Resource Repository

```properties
# cas.authn.gua.simple.[username1]=file:/path/to/image.jpg
# cas.authn.gua.simple.[username2]=file:/path/to/image.jpg
```

## JWT/Token Authentication

To learn more about this topic, [please review this guide](../installation/JWT-Authentication.html). 

{% include {{ version }}/principal-transformation.md configKey="cas.authn.token" %}

```properties
# cas.authn.token.name=
```

### Webflow configuration

{% include {{ version }}/webflow-configuration.md configKey="cas.authn.token.webflow" %}

### JWT Tickets

Allow CAS tickets through various protocol channels to be created as JWTs. See [this guide](../installation/Configure-ServiceTicket-JWT.html) 
or [this guide](../protocol/REST-Protocol.html) for more info.

```properties
# cas.authn.token.crypto.encryption-enabled=true
# cas.authn.token.crypto.signing-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.token" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}


## Remote Address Authentication

To learn more about this topic, [please review this guide](../installation/Remote-Address-Authentication.html).

```properties
# cas.authn.remote-address.ip-address-range=
# cas.authn.remote-address.name=
# cas.authn.remote-address.order=
```

## X509 Authentication

To learn more about this topic, [please review this guide](../installation/X509-Authentication.html).

### Webflow configuration

{% include {{ version }}/webflow-configuration.md configKey="cas.authn.x509.webflow" %}

```properties
# cas.authn.x509.webflow.port=8446
# cas.authn.x509.webflow.client-auth=want
```

### Principal Resolution

{% include {{ version }}/principal-transformation.md configKey="cas.authn.x509" %}

X.509 principal resolution can act on the following principal types:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------
| `SERIAL_NO`             | Resolve the principal by the serial number with a configurable <strong>radix</strong>, ranging from 2 to 36. If <code>radix</code> is <code>16</code>, then the serial number could be filled with leading zeros to even the number of digits.
| `SERIAL_NO_DN`          | Resolve the principal by serial number and issuer dn.
| `SUBJECT`               | Resolve the principal by extracting one or more attribute values from the certificate subject DN and combining them with intervening delimiters.
| `SUBJECT_ALT_NAME`      | Resolve the principal by the subject alternative name extension. (type: otherName)
| `SUBJECT_DN`            | The default type; Resolve the principal by the certificate's subject dn.
| `CN_EDIPI`              | Resolve the principal by the Electronic Data Interchange Personal Identifier (EDIPI) from the Common Name.
| `RFC822_EMAIL`          | Resolve the principal by the [RFC822 Name](https://tools.ietf.org/html/rfc5280#section-4.2.1.6) (aka E-mail address) type of subject alternative name field. 

For the `CN_EDIPI`,`SUBJECT_ALT_NAME`, and `RFC822_EMAIL` principal resolvers, since not all certificates have those attributes, 
you may specify the following property in order to have a different attribute from the certificate used as the principal.  
If no alternative attribute is specified then the principal will be null and CAS will fail auth or use a different authenticator.

```properties
# cas.authn.x509.alternate-principal-attribute=subjectDn|sigAlgOid|subjectX500Principal|x509Rfc822Email|x509subjectUPN
```

### CRL Fetching / Revocation

CAS provides a flexible policy engine for certificate revocation checking. This facility arose due to lack of configurability
in the revocation machinery built into the JSSE.

Available policies cover the following events:

- CRL Expiration
- CRL Unavailability

In either event, the following options are available:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `ALLOW`                 | Allow authentication to proceed.
| `DENY`                  | Deny authentication and block.
| `THRESHOLD`             | Applicable to CRL expiration, throttle the request whereby expired data is permitted up to a threshold period of time but not afterward.


Revocation certificate checking can be carried out in one of the following ways:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `NONE`                  | No revocation is performed.
| `CRL`                   | The CRL URI(s) mentioned in the certificate `cRLDistributionPoints` extension field. Caches are available to prevent excessive IO against CRL endpoints; CRL data is fetched if does not exist in the cache or if it is expired.
| `RESOURCE`              | A CRL hosted at a fixed location. The CRL is fetched at periodic intervals and cached.


To fetch CRLs, the following options are available:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `RESOURCE`              | By default, all revocation checks use fixed resources to fetch the CRL resource from the specified location.
| `LDAP`                  | A CRL resource may be fetched from a pre-configured attribute, in the event that the CRL resource location is an LDAP URI

```properties
# cas.authn.x509.crl-expired-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-unavailable-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-resource-expired-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-resource-unavailable-policy=DENY|ALLOW|THRESHOLD

# cas.authn.x509.revocation-checker=NONE|CRL|RESOURCE
# cas.authn.x509.crl-fetcher=RESOURCE|LDAP

# cas.authn.x509.crl-resources[0]=file:/...

# cas.authn.x509.cache-max-elements-in-memory=1000
# cas.authn.x509.cache-disk-overflow=false
# cas.authn.x509.cache-disk-size=100MB
# cas.authn.x509.cache-eternal=false
# cas.authn.x509.cache-time-to-live-seconds=7200

# cas.authn.x509.mixed-mode=true

# cas.authn.x509.check-key-usage=false
# cas.authn.x509.revocation-policy-threshold=172800

# cas.authn.x509.reg-ex-subject-dn-pattern=.+
# cas.authn.x509.reg-ex-trusted-issuer-dn-pattern=.+

# cas.authn.x509.name=
# cas.authn.x509.order=

# cas.authn.x509.principal-descriptor=
# cas.authn.x509.max-path-length=1
# cas.authn.x509.throw-on-fetch-failure=false

# cas.authn.x509.check-all=false
# cas.authn.x509.require-key-usage=false
# cas.authn.x509.refresh-interval-seconds=3600
# cas.authn.x509.max-path-length-allow-unspecified=false

# SUBJECT_DN
# cas.authn.x509.subject-dn.format=[DEFAULT,RFC1779,RFC2253,CANONICAL]
```  

| Type          | Description
|---------------|----------------------------------------------------------------------
| `DEFAULT`     | Calls certificate.getSubjectDN() method for backwards compatibility but that method is ["denigrated"](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/X509Certificate.html#getIssuerDN()). 
| `RFC1779`     | Calls [X500Principal.getName("RFC1779")](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()) which emits a subject DN with the attribute keywords defined in RFC 1779 (CN, L, ST, O, OU, C, STREET). Any other attribute type is emitted as an OID.
| `RFC2253`     | Calls [X500Principal.getName("RFC2253")](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()) which emits a subject DN with the attribute keywords defined in RFC 2253 (CN, L, ST, O, OU, C, STREET, DC, UID). Any other attribute type is emitted as an OID.
| `CANONICAL`   | Calls X500Principal.getName("CANONICAL" which emits a subject DN that starts with RFC 2253 and applies additional canonicalizations described in the [javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()).

```properties
# SERIAL_NO_DN
# cas.authn.x509.serial-no-dn.serial-number-prefix=SERIALNUMBER=
# cas.authn.x509.serial-no-dn.value-delimiter=,

# SERIAL_NO
# cas.authn.x509.serial-no.principal-s-n-radix=10
# cas.authn.x509.serial-no.principal-hex-s-n-zero-padding=false

# SUBJECT_ALT_NAME
# cas.authn.x509.subject-alt-name.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509Rfc822Email]

# CN_EDIPI 
# cas.authn.x509.cn-edipi.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509Rfc822Email|x509subjectUPN]

# RFC822_EMAIL 
# cas.authn.x509.rfc822-email.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509subjectUPN]
```

### X509 Certificate Extraction

These settings can be used to turn on and configure CAS to
extract an X509 certificate from a base64 encoded certificate
on a HTTP request header (placed there by a proxy in front of CAS).
If this is set to true, it is important that the proxy cannot
be bypassed by users and that the proxy ensures the header
never originates from the browser.

```properties
# cas.authn.x509.extract-cert=false
# cas.authn.x509.ssl-header-name=ssl_client_cert
```

The specific parsing logic for the certificate is compatible
with the Tomcat SSLValve which can work with headers set by
Apache HTTPD, Nginx, Haproxy, BigIP F5, etc.

### X509 Principal Resolution

```properties
# cas.authn.x509.principal-type=SERIAL_NO|SERIAL_NO_DN|SUBJECT|SUBJECT_ALT_NAME|SUBJECT_DN
```

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.x509.principal" %}

### X509 LDAP Integration

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.x509.ldap" %}

See LDAP attribute repositories [here](Configuration-Properties.html#ldap) to fetch additional 
LDAP attributes using the principal extracted from the X509 certificate. 

## Trusted Authentication

To learn more about this topic, [please review this guide](../installation/Trusted-Authentication.html). 

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.trusted" %}

```properties
# cas.authn.trusted.name=
# cas.authn.trusted.order=
# cas.authn.trusted.remote-principal-header=
```

## Multifactor Authentication

To learn more about this topic, [please review this guide](../mfa/Configuring-Multifactor-Authentication.html).

```properties
# Describe the global failure mode in case provider cannot be reached
# cas.authn.mfa.global-failure-mode=CLOSED

# Design the attribute chosen to communicate the authentication context
# cas.authn.mfa.authentication-context-attribute=authnContextClass

# Identify the request content type for non-browser MFA requests
# cas.authn.mfa.content-type=application/cas
```

### Multifactor Authentication: Global Trigger

```properties
# Activate MFA globally for all, regardless of other settings
# cas.authn.mfa.global-provider-id=mfa-duo
```

### Multifactor Authentication: Authentication Attribute Trigger

```properties
# Activate MFA globally based on authentication metadata attributes
# cas.authn.mfa.global-authentication-attribute-name-triggers=customAttributeName
# cas.authn.mfa.global-authentication-attribute-value-regex=customRegexValue
```

### Multifactor Authentication: Principal Attribute Trigger

```properties
# Activate MFA globally based on principal attributes
# cas.authn.mfa.global-principal-attribute-name-triggers=memberOf,eduPersonPrimaryAffiliation

# Specify the regular expression pattern to trigger multifactor when working with a single provider.
# Comment out the setting when working with multiple multifactor providers
# cas.authn.mfa.global-principal-attribute-value-regex=faculty|staff

# Activate MFA globally based on principal attributes and a groovy-based predicate
# cas.authn.mfa.global-principal-attribute-predicate=file:/etc/cas/PredicateExample.groovy
```

### Multifactor Authentication: REST API Trigger

{% include {{ version }}/rest-integration.md configKey="cas.authn.mfa.rest" %}

### Multifactor Authentication: Groovy Trigger

```properties
# Activate MFA based on a Groovy script
# cas.authn.mfa.groovyScript=file:/etc/cas/mfaGroovyTrigger.groovy
```

### Multifactor Authentication: Internet2 Grouper Trigger

```properties
# Activate MFA based on Internet2's Grouper
# cas.authn.mfa.grouper-group-field=NAME|EXTENSION|DISPLAY_NAME|DISPLAY_EXTENSION
```

### Multifactor Authentication: Http Request Trigger

```properties
# cas.authn.mfa.request-parameter=authn_method
# cas.authn.mfa.request-header=authn_method
# cas.authn.mfa.session-attribute=authn_method
```

### Multifactor Authentication: Provider Selection

```properties
# Select MFA provider, if resolved more than one, via Groovy script
# cas.authn.mfa.provider-selector-groovy-script=file:/etc/cas/mfaGroovySelector.groovy

# Enable provider selection menu, if resolved more than one
cas.authn.mfa.provider-selection-enabled=true
```

### Multifactor Trusted Device/Browser

To learn more about this topic, [please review this guide](../mfa/Multifactor-TrustedDevice-Authentication.html).

```properties
# cas.authn.mfa.trusted.authentication-context-attribute=isFromTrustedMultifactorAuthentication
# cas.authn.mfa.trusted.device-registration-enabled=true
# cas.authn.mfa.trusted.key-generator-type=DEFAULT|LEGACY
```

The following strategies can be used to generate keys for trusted device records:

| Type                 | Description
|----------------------|------------------------------------------------------------------------------------------------
| `DEFAULT`            | Uses a combination of the username, device name and device fingerprint to generate the device key.
| `LEGACY`             | Deprecated. Uses a combination of the username, record date and device fingerprint to generate the device key.

{% include {{ version }}/signing-encryption.md configKey="cas.authn.mfa.trusted" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### JSON Storage

```properties
# cas.authn.mfa.trusted.json.location=file:/etc/cas/config/trusted-dev.json
```

#### JDBC Storage

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.mfa.trusted.jpa" %}

#### CouchDb Storage

{% include {{ version }}/couchdb-integration.md configKey="cas.authn.mfa.trusted" %}

#### MongoDb Storage

{% include {{ version }}/mongodb-configuration.md configKey="cas.authn.mfa.trusted" %}

#### Redis Storage

{% include {{ version }}/redis-configuration.md configKey="cas.authn.mfa.trusted" %}

#### DynamoDb Storage
 
{% include {{ version }}/dynamodb-configuration.md configKey="cas.authn.mfa.trusted" %}

```properties
# cas.authn.mfa.trusted.dynamo-db.tableName=DynamoDbCasMfaTrustRecords
```

#### REST Storage

```properties
# cas.authn.mfa.trusted.rest.endpoint=https://api.example.org/trustedBrowser
```

#### Trusted Device Fingerprint

```properties
# cas.authn.mfa.trusted.device-fingerprint.componentSeparator=@  

# cas.authn.mfa.trusted.device-fingerprint.cookie.enabled=true
# cas.authn.mfa.trusted.device-fingerprint.cookie.order=1

# cas.authn.mfa.trusted.device-fingerprint.client-ip.enabled=true
# cas.authn.mfa.trusted.device-fingerprint.client-ip.order=2

# cas.authn.mfa.trusted.device-fingerprint.geolocation.enabled=false
# cas.authn.mfa.trusted.device-fingerprint.geolocation.order=4
```

{% include {{ version }}/cookie-configuration.md configKey="cas.authn.mfa.trusted.device-fingerprint.cookie" %}

The default cookie name is set to `MFATRUSTED` and the default maxAge is set to `2592000`.

{% include {{ version }}/signing-encryption.md configKey="cas.authn.mfa.trusted.device-fingerprint.cookie" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### Cleaner

A cleaner process is scheduled to run in the background to clean up expired and stale tickets.
This section controls how that process should behave. 

{% include {{ version }}/job-scheduling.md configKey="cas.authn.mfa.trusted.cleaner" %}

#### Google Authenticator JSON

```properties
# cas.authn.mfa.gauth.json.location=file:/somewhere.json
```

#### Google Authenticator Rest

{% include {{ version }}/rest-integration.md configKey="cas.authn.mfa.gauth.rest" %}

Additionally, tokens can be managed via REST using the following settings:

```properties
# cas.authn.mfa.gauth.rest.token-url=https://somewhere.gauth.com
```

#### Google Authenticator MongoDb

{% include {{ version }}/mongodb-configuration.md configKey="cas.authn.mfa.gauth" %}
 
The following settings are additionally available for this feature:

```properties
# cas.authn.mfa.gauth.mongo.token-collection=MongoDbGoogleAuthenticatorTokenRepository
```

#### Google Authenticator LDAP

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.mfa.gauth.ldap" %}

The following settings are additionally available for this feature:

```properties
# cas.authn.mfa.gauth.ldap.account-attribute-name=gauthRecord
```

#### Google Authenticator Redis


 
 
#### Google Authenticator JPA



### YubiKey

To learn more about this topic, [please review this guide](../mfa/YubiKey-Authentication.html).

```properties
# cas.authn.mfa.yubikey.client-id=
# cas.authn.mfa.yubikey.secret-key=
# cas.authn.mfa.yubikey.rank=0
# cas.authn.mfa.yubikey.api-urls=
# cas.authn.mfa.yubikey.trusted-device-enabled=false
# cas.authn.mfa.yubikey.multiple-device-registration-enabled=false

# cas.authn.mfa.yubikey.name=
# cas.authn.mfa.yubikey.order=
```

{% include {{ version }}/mfa-bypass-configuration.md configKey="cas.authn.mfa.yubikey" %}

#### YubiKey REST Device Store

{% include {{ version }}/rest-integration.md configKey="cas.authn.mfa.yubikey.rest" %}

#### YubiKey JSON Device Store

```properties
# cas.authn.mfa.yubikey.json-file=file:/etc/cas/deviceRegistrations.json
```

#### YubiKey Allowed Device Store

```properties
# cas.authn.mfa.yubikey.allowed-devices.uid1=yubikeyPublicId1
# cas.authn.mfa.yubikey.allowed-devices.uid2=yubikeyPublicId2
```
 
### Radius OTP

To learn more about this topic, [please review this guide](../mfa/RADIUS-Authentication.html).

```properties
# cas.authn.mfa.radius.rank=0
# cas.authn.mfa.radius.trusted-device-enabled=false
# cas.authn.mfa.radius.allowed-authentication-attempts=-1
# cas.authn.mfa.radius.name=
# cas.authn.mfa.radius.order=
```

{% include {{ version }}/radius-configuration.md configKey="cas.authn.mfa.radius" %}

{% include {{ version }}/mfa-bypass-configuration.md configKey="cas.authn.mfa.radius" %}

### DuoSecurity

To learn more about this topic, [please review this guide](../mfa/DuoSecurity-Authentication.html).

```properties
# cas.authn.mfa.duo[0].duo-secret-key=
# cas.authn.mfa.duo[0].rank=0
# cas.authn.mfa.duo[0].duo-application-key=
# cas.authn.mfa.duo[0].duo-integration-key=
# cas.authn.mfa.duo[0].duo-api-host=
# cas.authn.mfa.duo[0].trusted-device-enabled=false
# cas.authn.mfa.duo[0].id=mfa-duo
# cas.authn.mfa.duo[0].registration-url=https://registration.example.org/duo-enrollment
# cas.authn.mfa.duo[0].name=
# cas.authn.mfa.duo[0].order=
```

{% include {{ version }}/mfa-bypass-configuration.md configKey="cas.authn.mfa.duo[0]" %}


#### Web SDK

The `duo-application-key` is a required string, at least 40 characters long, that you 
generate and keep secret from Duo. You can generate a random string in Python with:

```python
import os, hashlib
print hashlib.sha1(os.urandom(32)).hexdigest()
```

#### Universal Prompt

Universal Prompt no longer requires you to generate and use a application key value. Instead, it requires a *client id* and *client secret*,
which are known and taught CAS using the integration key and secret key configuration settings. You will need get your integration key, 
secret key, and API hostname from Duo Security when you register CAS as a protected application. 

### FIDO2 WebAuthn

To learn more about this topic, [please review this guide](../mfa/FIDO2-WebAuthn-Authentication.html).

```properties
# cas.authn.mfa.web-authn.allowed-origins=
# cas.authn.mfa.web-authn.application-id=
# cas.authn.mfa.web-authn.relying-party-name=CAS WebAuthn 
# cas.authn.mfa.web-authn.relying-party-id=

# cas.authn.mfa.web-authn.display-name-attribute=displayName
# cas.authn.mfa.web-authn.allow-primary-authentication=false

# cas.authn.mfa.web-authn.allow-unrequested-extensions=false
# cas.authn.mfa.web-authn.allow-untrusted-attestation=false
# cas.authn.mfa.web-authn.validate-signature-counter=true
# cas.authn.mfa.web-authn.attestation-conveyance-preference=DIRECT|INDIRECT|NONE
# cas.authn.mfa.web-authn.trusted-device-metadata.location=

# cas.authn.mfa.web-authn.trusted-device-enabled=false

# cas.authn.mfa.web-authn.expire-devices=30
# cas.authn.mfa.web-authn.expire-devices-time-unit=DAYS
```   

{% include {{ version }}/mfa-bypass-configuration.md configKey="cas.authn.mfa.web-authn" %}

{% include {{ version }}/signing-encryption.md configKey="cas.authn.mfa.web-authn" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

### FIDO2 WebAuthn Cleaner

{% include {{ version }}/job-scheduling.md configKey="cas.authn.mfa.web-authn.cleaner" %}

### FIDO2 WebAuthn JSON

```properties
# cas.authn.mfa.web-authn.json.location=file:///etc/cas/config/devices.json
```

### FIDO2 WebAuthn MongoDb

{% include {{ version }}/mongodb-configuration.md configKey="cas.authn.mfa.web-authn" %}

### FIDO2 WebAuthn LDAP

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.mfa.web-authn.ldap" %}

```properties
# cas.authn.mfa.web-authn.ldap.account-attribute-name=casWebAuthnRecord
```

### FIDO2 WebAuthn JPA

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.mfa.web-authn.jpa" %}

### FIDO2 WebAuthn Redis

{% include {{ version }}/redis-configuration.md configKey="cas.authn.mfa.web-authn" %}

### FIDO2 WebAuthn DynamoDb

{% include {{ version }}/dynamodb-configuration.md configKey="cas.authn.mfa.web-authn" %}

### FIDO2 WebAuthn REST

{% include {{ version }}/rest-integration.md configKey="cas.authn.mfa.web-authn.rest" %}


## SAML Core

Control core SAML functionality within CAS.

```properties
# cas.saml-core.ticketid-saml2=false
# cas.saml-core.skew-allowance=5
# cas.saml-core.issue-length=30
# cas.saml-core.attribute-namespace=http://www.ja-sig.org/products/cas/
# cas.saml-core.issuer=localhost
# cas.saml-core.security-manager=org.apache.xerces.util.SecurityManager
```

## SAML IdP

Allow CAS to become a SAML2 identity provider.

To learn more about this topic, [please review this guide](../installation/Configuring-SAML2-Authentication.html).

```properties
# cas.authn.saml-idp.entity-id=https://cas.example.org/idp
# cas.authn.saml-idp.replicate-sessions=false

# cas.authn.saml-idp.authentication-context-class-mappings[0]=urn:oasis:names:tc:SAML:2.0:ac:classes:SomeClassName->mfa-duo
# cas.authn.saml-idp.authentication-context-class-mappings[1]=https://refeds.org/profile/mfa->mfa-gauth

# cas.authn.saml-idp.attribute-friendly-names[0]=urn:oid:1.3.6.1.4.1.5923.1.1.1.6->eduPersonPrincipalName
  
# cas.authn.saml-idp.attribute-query-profile-enabled=true
```

### Attributes Name Formats

Name formats for an individual attribute can be mapped to a number of pre-defined formats, or a custom format of your own choosing.
A given attribute that is to be encoded in the final SAML response may contain any of the following name formats:

| Type                 | Description
|----------------------|----------------------------------------------------------------------------
| `basic`              | Map the attribute to `urn:oasis:names:tc:SAML:2.0:attrname-format:basic`.
| `uri`                | Map the attribute to `urn:oasis:names:tc:SAML:2.0:attrname-format:uri`.
| `unspecified`        | Map the attribute to `urn:oasis:names:tc:SAML:2.0:attrname-format:basic`.
| `urn:my:own:format`  | Map the attribute to `urn:my:own:format`.

### SAML Metadata

```properties
# cas.authn.saml-idp.metadata.location=file:/etc/cas/saml
# cas.authn.saml-idp.metadata.metadata-backup-location=

# cas.authn.saml-idp.metadata.cache-expiration-minutes=30
# cas.authn.saml-idp.metadata.fail-fast=true
# cas.authn.saml-idp.metadata.private-key-alg-name=RSA
# cas.authn.saml-idp.metadata.require-valid-metadata=true
# cas.authn.saml-idp.metadata.force-metadata-refresh=true

# cas.authn.saml-idp.metadata.basic-authn-username=
# cas.authn.saml-idp.metadata.basic-authn-password=
# cas.authn.saml-idp.metadata.supported-content-types=
```

#### SAML Metadata JPA

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.saml-idp.metadata.jpa" %}

```properties
# cas.authn.saml-idp.metadata.jpa.idp-metadata-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.jpa" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}
 
#### SAML Metadata CouchDb

{% include {{ version }}/couchdb-integration.md configKey="cas.authn.saml-idp.metadata" %}
 
```properties
# cas.authn.saml-idp.metadata.couch-db.idp-metadata-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.couch-db" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### SAML Metadata Git

```properties
# cas.authn.saml-idp.metadata.git.idp-metadata-enabled=true
```

{% include {{ version }}/git-configuration.md configKey="cas.authn.saml-idp.metadata" %}

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.git" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}


#### SAML Metadata MongoDb

{% include {{ version }}/mongodb-configuration.md configKey="cas.authn.saml-idp.metadata" %}
 
```properties
# cas.authn.saml-idp.metadata.mongo.idp-metadata-collection=saml-idp-metadata
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.mongo" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### SAML Metadata Redis

{% include {{ version }}/redis-configuration.md configKey="cas.authn.saml-idp.metadata" %}


```properties
# cas.authn.saml-idp.metadata.redis.idp-metadata-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.redis" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### SAML Metadata REST
 
{% include {{ version }}/rest-integration.md configKey="cas.authn.saml-idp.metadata.rest" %}

```properties
# cas.authn.saml-idp.metadata.rest.idp-metadata-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.rest" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

#### SAML Metadata Amazon S3

{% include {{ version }}/aws-integration.md configKey="cas.authn.saml-idp.metadata.amazon-s3" %}


{% include {{ version }}/signing-encryption.md configKey="cas.authn.saml-idp.metadata.amazon-s3" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}
 
```properties
# cas.authn.saml-idp.metadata.amazon-s3.bucket-name=saml-sp-bucket
# cas.authn.saml-idp.metadata.mongo.idp-metadata-bucket-name=saml-idp-bucket
```

### SAML Logout

```properties
# cas.authn.saml-idp.logout.force-signed-logout-requests=true
# cas.authn.saml-idp.logout.single-logout-callbacks-disabled=false
# cas.authn.saml-idp.logout.sign-logout-response=false
# cas.authn.saml-idp.logout.send-logout-response=true
# cas.authn.saml-idp.logout.logout-response-binding=
```

### SAML Algorithms & Security

```properties
# cas.authn.saml-idp.algs.override-signature-canonicalization-algorithm=
# cas.authn.saml-idp.algs.override-data-encryption-algorithms=
# cas.authn.saml-idp.algs.override-key-encryption-algorithms=
# cas.authn.saml-idp.algs.override-blocked-encryption-algorithms=
# cas.authn.saml-idp.algs.override-allowed-algorithms=
# cas.authn.saml-idp.algs.override-signature-reference-digest-methods=
# cas.authn.saml-idp.algs.override-signature-algorithms=
# cas.authn.saml-idp.algs.override-blocked-signature-signing-algorithms=
# cas.authn.saml-idp.algs.override-allowed-signature-signing-algorithms=
```

### SAML Response

```properties
# cas.authn.saml-idp.response.default-authentication-context-class=
# cas.authn.saml-idp.response.default-attribute-name-format=uri
# cas.authn.saml-idp.response.sign-error=false
# cas.authn.saml-idp.response.signing-credential-type=X509|BASIC
# cas.authn.saml-idp.response.attribute-name-formats=attributeName->basic|uri|unspecified|custom-format-etc,...
```

### SAML Ticket

```properties
# cas.authn.saml-idp.ticket.saml-artifacts-cache-storage-name=samlArtifactsCache
# cas.authn.saml-idp.ticket.saml-attribute-query-cache-storage-name=samlAttributeQueryCache
```

### SAML Profiles

```properties
# cas.authn.saml-idp.profile.slo.url-decode-redirect-request=false
# cas.authn.saml-idp.profile.sso.url-decode-redirect-request=false
# cas.authn.saml-idp.profile.sso-post-simple-sign.url-decode-redirect-request=false
```


### OpenID Connect WebFinger

WebFinger is a protocol specified by the Internet Engineering Task Force IETF that allows for 
discovery of information about people and things identified by a URI.[1] Information about a person 
might be discovered via an "acct:" URI, for example, which is a URI that looks like an email address.

#### WebFinger UserInfo via Groovy

```properties
# cas.authn.oidc.webfinger.userInfo.groovy.location=classpath:/webfinger.groovy
```

#### WebFinger UserInfo via REST

{% include {{ version }}/rest-integration.md configKey="cas.authn.oidc.webfinger.user-info.rest" %}



## Pac4j Delegated AuthN


### GitHub

The following properties are additionally supported, when delegating authentication to GitHub:

```properties
# cas.authn.pac4j.github.scope=user|read:user|user:email|...
```       

The default scope is `user`, i.e. `read/write` access to the GitHub user account.

For a full list of possible scopes, please [see this link](https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/). 

### Google

The following properties are additionally supported, when delegating authentication to Google:

```properties
# cas.authn.pac4j.google.scope=EMAIL|PROFILE|EMAIL_AND_PROFILE
```

### CAS

Delegate authentication to an external CAS server.

```properties
# cas.authn.pac4j.cas[0].login-url=
# cas.authn.pac4j.cas[0].protocol=
```

### OAuth20

Delegate authentication to an generic OAuth2 server. 

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oauth2[0]" %}
{% include {{ version }}/oauth-delegated-authentication.md configKey="cas.authn.pac4j.oauth2[0]" %}

### OpenID Connect

Delegate authentication to an external OpenID Connect server.

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0]" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0]" %}

#### Google

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].google" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].google" %}

#### Azure AD

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].azure" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].azure" %}

The following settings specifically apply to this provider:

```properties
# cas.authn.pac4j.oidc[0].azure.tenant=tenant-name
```

#### KeyCloak

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].keycloak" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].keycloak" %}

```properties
# cas.authn.pac4j.oidc[0].keycloak.realm=
# cas.authn.pac4j.oidc[0].keycloak.base-uri=
```                                     

#### Apple Signin

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].apple" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].apple" %}

```properties
# cas.authn.pac4j.oidc[0].apple.private-key=
# cas.authn.pac4j.oidc[0].apple.private-key-id=
# cas.authn.pac4j.oidc[0].apple.team-id=
# cas.authn.pac4j.oidc[0].apple.timeout=PT30S
```  

#### Generic

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].generic" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].generic" %}

### SAML2



#### SAML2 Identity Provider Discovery

```properties
cas.authn.pac4j.saml-discovery.resource[0].location=file:/etc/cas/config/json-feed.json
```

### Facebook

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.facebook" %}

```properties
# cas.authn.pac4j.facebook.fields=
# cas.authn.pac4j.facebook.scope=
```

### HiOrg Server

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.hi-org-server" %}

```properties
# cas.authn.pac4j.hi-org-server.scope=eigenedaten
```

### LinkedIn

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.linkedin" %}

```properties
# cas.authn.pac4j.linked-in.scope=
```

### Twitter

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.twitter" %}

```properties
# cas.authn.pac4j.twitter.include-email=false
```

## OAuth2

Allows CAS to act as an OAuth2 provider. Here you can control how long various tokens issued by CAS should last, etc.

{% include {{ version }}/signing-encryption.md configKey="cas.authn.oauth" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

To learn more about this topic, [please review this guide](../installation/OAuth-OpenId-Authentication.html).

```properties
# cas.authn.oauth.replicate-sessions=false 
# cas.authn.oauth.grants.resource-owner.require-service-header=true
# cas.authn.oauth.user-profile-view-type=NESTED|FLAT
```

### Refresh Tokens

```properties
# cas.authn.oauth.refresh-token.time-to-kill-in-seconds=2592000
```

### Codes

```properties
# cas.authn.oauth.code.time-to-kill-in-seconds=30
# cas.authn.oauth.code.number-of-uses=1
```

### Access Tokens

```properties
# cas.authn.oauth.access-token.time-to-kill-in-seconds=7200
# cas.authn.oauth.access-token.max-time-to-live-in-seconds=28800
```

### Device Tokens
 
```
# cas.authn.oauth.device-token.time-to-kill-in-seconds=2592000
# cas.authn.oauth.device-token.refresh-interval=PT15S 
```

### Device User Codes

```
# cas.authn.oauth.device-user-code.time-to-kill-in-seconds=2592000
# cas.authn.oauth.device-user-code.user-code-length=8
```

### OAuth2 JWT Access Tokens

```properties
# cas.authn.oauth.access-token.create-as-jwt=false
# cas.authn.oauth.access-token.crypto.encryption-enabled=true
# cas.authn.oauth.access-token.crypto.signing-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.oauth.access-token" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}


### OAuth2 UMA

To learn more about this topic, [please review this guide](../installation/OAuth-OpenId-Authentication.html).

```properties
# cas.authn.uma.issuer=http://localhost:8080/cas

# cas.authn.uma.requesting-party-token.max-time-to-live-in-seconds=PT3M
# cas.authn.uma.requesting-party-token.jwks-file=file:/etc/cas/config/uma-keystore.jwks

# cas.authn.uma.permission-ticket.max-time-to-live-in-seconds=PT3M
```

#### OAuth2 UMA JPA

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.uma.resource-set.jpa" %}



## Warning Cookie

Created by CAS if and when users are to be warned when accessing CAS protected services. 

{% include {{ version }}/cookie-configuration.md configKey="cas.warning-cookie" %}

```properties
# cas.warning-cookie.auto-configure-cookie-path=true
```

## Ticket Granting Cookie

{% include {{ version }}/cookie-configuration.md configKey="cas.tgc" %}

```properties
# cas.tgc.pin-to-session=true
# cas.tgc.remember-me-max-age=P14D
# cas.tgc.auto-configure-cookie-path=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.tgc" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

## Logout

Control various settings related to CAS logout functionality. 

```properties
# cas.logout.follow-service-redirects=false
# cas.logout.redirect-parameter=service
# cas.logout.redirect-url=https://www.github.com
# cas.logout.confirm-logout=false
# cas.logout.remove-descendant-tickets=false
```

## Single Logout

To learn more about this topic, [please review this guide](../installation/Logout-Single-Signout.html).

```properties
# cas.slo.disabled=false
# cas.slo.asynchronous=true
```

## Clearpass

Capture and cache user credentials and optionally release them to trusted applications.
To learn more about this topic, [please review this guide](../integration/ClearPass.html).

<div class="alert alert-warning"><strong>Usage Warning!</strong><p>ClearPass is turned off by default.
Think <strong>VERY CAREFULLY</strong> before turning on this feature, as it <strong>MUST</strong> be
the last resort in getting an integration to work...maybe not even then.</p></div>

```properties
# cas.clearpass.cache-credential=false
```

{% include {{ version }}/signing-encryption.md configKey="cas.clearpass" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}



## Sleuth Distributed Tracing

To learn more about this topic, [please review this guide](../monitoring/Monitoring-Statistics.html#distributed-tracing).

```properties
# spring.sleuth.sampler.percentage = 0.5
# spring.sleuth.enabled=true

# spring.zipkin.enabled=true
# spring.zipkin.base-url=http://localhost:9411/
```

## Monitoring

To learn more about this topic, [please review this guide](../monitoring/Monitoring-Statistics.html).

### Ticket Granting Tickets

Decide how CAS should monitor the generation of TGTs.

```properties
# cas.monitor.tgt.warn.threshold=10
# cas.monitor.tgt.warn.eviction-threshold=0
```

### Service Tickets

Decide how CAS should monitor the generation of STs.

```properties
# cas.monitor.st.warn.threshold=10
# cas.monitor.st.warn.evictionThreshold=0
```

### Load 

Decide how CAS should monitor system load of a CAS Server.  

```properties
# cas.monitor.load.warn.threshold=25
```

### Cache Monitors

Decide how CAS should monitor the internal state of various cache storage services.

```properties
# cas.monitor.warn.threshold=10
# cas.monitor.warn.eviction-threshold=0
```

### Database Monitoring

Decide how CAS should monitor the internal state of JDBC connections used
for authentication or attribute retrieval. 

{% include {{ version }}/rdbms-configuration.md configKey="cas.monitor.jdbc" %}

```properties
# cas.monitor.jdbc.validation-query=SELECT 1
# cas.monitor.jdbc.max-wait=5000
```

### LDAP Server Monitoring

Decide how CAS should monitor the LDAP server it uses for authentication, etc.  

{% include {{ version }}/ldap-configuration.md configKey="cas.monitor.ldap[0]" %}

The default for the pool size is zero to prevent failed ldap pool initialization to impact server startup.

The following properties are specific to the ldap monitor and configure the thread pool 
that will ping on the LDAP monitor connection pool.

```properties
# cas.monitor.ldap[0].max-wait=5000
# cas.monitor.ldap[0].pool.min-size=0
# cas.monitor.ldap[0].pool.max-size=18
# cas.monitor.ldap[0].pool.enabled=true
```

### Memory

Decide how CAS should monitor the internal state of JVM memory available at runtime.

```properties
# cas.monitor.free-mem-threshold=10
```

## Themes

To learn more about this topic, [please review this guide](../ux/User-Interface-Customization-Themes.html).

```properties
# cas.theme.param-name=theme
# cas.theme.default-theme-name=cas-theme-default
```





## Service Tickets Behavior

Controls the expiration policy of service tickets, as well as other properties applicable to STs.

```properties
# cas.ticket.st.max-length=20

# cas.ticket.st.number-of-uses=1
# cas.ticket.st.time-to-kill-in-seconds=10
```

## Proxy Granting Tickets Behavior

```properties
# cas.ticket.pgt.max-length=50
```

## Proxy Tickets Behavior

```properties
# cas.ticket.pt.time-to-kill-in-seconds=10
# cas.ticket.pt.number-of-uses=1
```

## Transient Session Tickets Behavior

```properties
# cas.ticket.tst.time-to-kill-in-seconds=300
```

## Ticket Granting Tickets Behavior

```properties
# cas.ticket.tgt.only-track-most-recent-session=true
# cas.ticket.tgt.max-length=50
```

## TGT Expiration Policy

Ticket expiration policies are activated in the following conditions:

- If the timeout values for the default policy are all set to zero or less, CAS shall ensure tickets are *never* considered expired.
- Disabling a policy requires that all its timeout settings be set to a value equal or less than zero.
- If not ticket expiration policy is determined, CAS shall ensure the ticket are *always* considered expired.

<div class="alert alert-info"><strong>Keep What You Need!</strong><p>You are encouraged to only keep and maintain 
properties and settings needed for a particular policy. It is <strong>UNNECESSARY</strong> to grab a copy of all 
fields or keeping a copy as a reference while leaving them commented out. This strategy would ultimately lead to 
poor upgrades increasing chances of breaking changes and a messy deployment at that.</p></div>

Ticket expiration policies are activated in the following order:

1. Tickets are never expired, if and when settings for the default policy are configured accordingly.
2. Timeout
3. Default
4. Throttled Timeout
5. Hard Timeout
6. Tickets always expire immediately.

### Default

Provides a hard-time out as well as a sliding window.

```properties
# Set to a negative value to never expire tickets
# cas.ticket.tgt.max-time-to-live-in-seconds=28800
# cas.ticket.tgt.time-to-kill-in-seconds=7200
```

### Remember Me

```properties
# cas.ticket.tgt.remember-me.enabled=true
# cas.ticket.tgt.remember-me.time-to-kill-in-seconds=28800
```

### Timeout

The expiration policy applied to TGTs provides for most-recently-used expiration 
policy, similar to a Web server session timeout.

```properties
# cas.ticket.tgt.timeout.max-time-to-live-in-seconds=28800
```

### Throttled Timeout

The throttled timeout policy extends the Timeout policy with the concept of throttling where a ticket may be used at most every N seconds.

```properties
# cas.ticket.tgt.throttledTimeout.timeToKillInSeconds=28800
# cas.ticket.tgt.throttledTimeout.timeInBetweenUsesInSeconds=5
```

### Hard Timeout

The hard timeout policy provides for finite ticket lifetime as measured from the time of creation.

```properties
# cas.ticket.tgt.hard-timeout.time-to-kill-in-seconds=28800
```


## Google Analytics

To learn more about this topic, [please review this guide](../integration/Configuring-Google-Analytics.html).

```properties
# cas.googleAnalytics.google-analytics-tracking-id=
```

### Google Analytics Cookie

{% include {{ version }}/cookie-configuration.md configKey="cas.google-analytics.cookie" %}

```properties
cas.google-analytics.cookie.attribute-name=
cas.google-analytics.cookie.attribute-value-pattern=.+
```

## Spring Webflow

Control how Spring Webflow's conversational session state should be managed by CAS,
and all other webflow related settings.

To learn more about this topic, [please review this guide](../webflow/Webflow-Customization.html).

```properties
# cas.webflow.always-pause-redirect=false
# cas.webflow.refresh=true
# cas.webflow.redirect-same-state=false
# cas.webflow.autoconfigure=true
```

### Spring Webflow Login Decorations

#### Groovy

```properties
# cas.webflow.login-decorator.groovy.location=file:/etc/cas/config/LoginDecorator.groovy
```

#### REST

{% include {{ version }}/rest-integration.md configKey="cas.webflow.login-decorator.rest" %}

### Spring Webflow Auto Configuration

Options that control how the Spring Webflow context is dynamically altered and configured by CAS. To learn more about this topic, [please review this guide](../webflow/Webflow-Customization-Extensions.html).

```properties
# cas.webflow.autoconfigure=true
```

#### Spring Webflow Groovy Auto Configuration

Control the Spring Webflow context via a custom Groovy script.

```properties
# cas.webflow.groovy.location=file:/etc/cas/config/custom-webflow.groovy
```

### Spring Webflow Session Management

To learn more about this topic, [see this guide](../webflow/Webflow-Customization-Sessions.html).

```properties
# cas.webflow.session.lock-timeout=30
# cas.webflow.session.compress=false
# cas.webflow.session.max-conversations=5

# Enable server-side session management
# cas.webflow.session.storage=false
```

#### Spring Webflow Client-Side Session

{% include {{ version }}/signing-encryption.md configKey="cas.webflow" signingKeySize="512" encryptionKeySize="16" encryptionAlg="AES" %}

#### Spring Webflow Hazelcast Server-Side Session

```properties
# cas.webflow.session.hz-location=classpath:/hazelcast.xml
```

#### Spring Webflow MongoDb Server-Side Session

```properties
# spring.data.mongodb.host=mongo-srv
# spring.data.mongodb.port=27018
# spring.data.mongodb.database=prod
```

#### Spring Webflow Redis Server-Side Session

```properties
# spring.session.store-type=redis
# spring.redis.host=localhost
# spring.redis.password=secret
# spring.redis.port=6379
```

#### Spring Webflow JDBC Server-Side Session

```properties
# spring.session.store-type=jdbc
# spring.session.jdbc.initialize-schema=embedded
# spring.session.jdbc.schema=classpath:org/springframework/session/jdbc/schema-@@platform@@.sql
# spring.session.jdbc.table-name=SPRING_SESSION

# spring.datasource.url=jdbc:hsqldb:mem:cas-sessions
# spring.datasource.username=sa
# spring.datasource.password=
```

### Authentication Exceptions

Map custom authentication exceptions in the CAS webflow and link them to custom messages defined in message bundles.

To learn more about this topic, [please review this guide](../webflow/Webflow-Customization-Exceptions.html).

```properties
# cas.authn.errors.exceptions=value1,value2,...
```

### Authentication Interrupt

Interrupt the authentication flow to reach out to external services. To learn more about this topic, [please review this guide](../webflow/Webflow-Customization-Interrupt.html).

#### Authentication Interrupt JSON

```properties
# cas.interrupt.json.location=file:/etc/cas/config/interrupt.json
```

#### Authentication Interrupt Regex Attributes

```properties
# cas.interrupt.attribute-name=attribute-name-pattern
# cas.interrupt.attribute-value=attribute-value-pattern
```

#### Authentication Interrupt Groovy

```properties
# cas.interrupt.groovy.location=file:/etc/cas/config/interrupt.groovy
```

#### Authentication Interrupt REST

{% include {{ version }}/rest-integration.md configKey="cas.interrupt.rest" %}

## REST API

To learn more about this topic, [please review this guide](../protocol/REST-Protocol.html).

```properties
# cas.rest.attribute-name=
# cas.rest.attribute-value=
# cas.rest.header-auth=
# cas.rest.body-auth=
# cas.rest.tls-client-auth=
```


## SAML Metadata UI

Control how SAML MDUI elements should be displayed on the main CAS login page
in the event that CAS is handling authentication for an external SAML2 IdP.

To learn more about this topic, [please review this guide](../integration/Shibboleth.html).

```properties
# cas.saml-metadata-ui.require-valid-metadata=true
# cas.saml-metadata-ui.resources=classpath:/sp-metadata::classpath:/pub.key,http://md.incommon.org/InCommon/InCommon-metadata.xml::classpath:/inc-md-pub.key
# cas.saml-metadata-ui.max-validity=0
# cas.saml-metadata-ui.require-signed-root=false
# cas.saml-metadata-ui.parameter=entityId
```         

{% include {{ version }}/job-scheduling.md configKey="cas.saml-metadata-ui" %}


## Provisioning

### SCIM

Provision the authenticated CAS principal via SCIM.
To learn more about this topic, [please review this guide](../integration/SCIM-Integration.html).

```properties
# cas.scim.version=2
# cas.scim.target=
# cas.scim.oauthToken=
# cas.scim.username=
# cas.scim.password=
```

## Apache Fortress Authentication

To learn more about this topic, [please review this guide](../installation/Configuring-Fortress-Authentication.html).

```properties
# cas.authn.fortress.rbaccontext=HOME
```

## CAS Client

Configure settings relevant to the Java CAS client configured to handle inbound ticket validation operations, etc.

```properties
# cas.client.prefix=https://sso.example.org/cas
# cas.client.validator-type=CAS10|CAS20|CAS30|JSON
```
